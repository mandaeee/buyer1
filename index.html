<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Special For You</title>
    <link href="https://fonts.googleapis.com/css2?family=Gaegu:wght@400;700&family=Fredoka:wght@400;600&display=swap" rel="stylesheet">
    
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        
        body { 
            background-color: #d1d1d1; 
            overflow: hidden; 
            font-family: 'Fredoka', sans-serif;
            width: 100%;
            height: 100vh;
            height: -webkit-fill-available;
        }

        #halaman-awal {
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background: linear-gradient(135deg, #f8f8f8 0%, #c0c0c0 100%);
            transition: transform 1.2s cubic-bezier(0.85, 0, 0.15, 1);
            position: relative;
            z-index: 10;
            padding: 20px;
        }

        .judul-awal {
            font-size: 1.7rem;
            color: #444;
            margin-bottom: 40px;
            z-index: 20;
            text-align: center; 
            max-width: 300px; 
            line-height: 1.5; 
        }

        .envelope-wrapper {
            position: relative;
            cursor: pointer;
            z-index: 20;
            width: 200px; 
            height: 130px;
        }

        .envelope {
            position: absolute;
            width: 100%;
            height: 100%;
            background: #9e9e9e;
            border-radius: 0 0 10px 10px;
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }

        .envelope::before {
            content: "";
            position: absolute;
            top: 0; left: 0;
            width: 0; height: 0;
            border-left: 100px solid transparent;
            border-right: 100px solid transparent;
            border-top: 80px solid #858585; 
            transition: 0.5s;
            transform-origin: top;
            z-index: 22;
        }

        .envelope.open::before { transform: rotateX(180deg); z-index: 1; }

        .franco {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 50px; height: 50px;
            background: #fdf2f2;
            border-radius: 50%;
            border: 2px dashed #9e9e9e;
            display: flex; justify-content: center; align-items: center;
            font-size: 0.7rem; font-weight: bold; color: #666;
            z-index: 23;
        }

        .film-strip {
            position: absolute;
            width: 80px;
            height: 120px;
            background: #222;
            border: 4px solid #111;
            border-radius: 10px;
            z-index: 100;
            bottom: 20px;
            left: 60px;
            opacity: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 5px;
            pointer-events: none;
        }

        .film-strip img { width: 100%; height: 100%; object-fit: cover; border-radius: 2px; }

        .animate-out { animation: flyOut 1.5s ease-in-out forwards; }
        @keyframes flyOut {
            0% { transform: translateY(0) scale(0.5); opacity: 0; }
            50% { transform: translateY(-150px) rotate(-10deg) scale(0.8); opacity: 1; }
            100% { transform: translateY(-250px) rotate(-20deg) scale(0.8); opacity: 0; }
        }

        .animate-big {
            animation: flyBig 4s ease-in-out forwards;
            width: 250px; 
            height: 350px;
            position: fixed;
            top: 0;
            left: 0;
        }

        @keyframes flyBig {
            0% { transform: translate(120vw, -20vh) rotate(20deg); opacity: 0; }
            20% { opacity: 1; }
            50% { transform: translate(20vw, 25vh) rotate(0deg); opacity: 1; }
            80% { opacity: 1; }
            100% { transform: translate(-120vw, -20vh) rotate(-20deg); opacity: 0; }
        }

        #halaman-utama {
            height: 100vh;
            width: 100%;
            background: #ebebeb;
            position: absolute;
            top: 100%;
            left: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 15px 10px;
            transition: transform 1.2s cubic-bezier(0.85, 0, 0.15, 1);
            z-index: 5;
            overflow: hidden;
        }

        .photo-wrapper {
            position: relative;
            width: 100%;
            min-height: 230px; 
            display: flex; justify-content: center; align-items: center;
            z-index: 20;
        }

        .frame {
            position: absolute;
            width: 145px;
            height: 180px;
            background: white;
            padding: 8px 8px 35px 8px;
            box-shadow: 0 8px 15px rgba(0,0,0,0.1);
        }
        .frame img { width: 100%; height: 100%; object-fit: cover; }

        .foto1 { transform: rotate(-10deg) translateX(-85px) translateY(-10px); }
        .foto2 { transform: rotate(12deg) translateX(85px) translateY(-10px); }
        .foto3 { transform: rotate(-5deg) translateX(-100px) translateY(85px); z-index: 19; }
        .foto4 { transform: rotate(8deg) translateX(100px) translateY(85px); z-index: 19; }

        .paper {
            width: 92%; max-width: 420px;
            background: #fff;
            border-radius: 20px;
            padding: 25px 22px;
            flex: 1;
            overflow-y: auto;
            margin-top: 65px; 
            margin-bottom: 25px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.06);
            z-index: 25;
            position: relative;
            border: 1px solid rgba(0,0,0,0.05);
        }

        #typing-text { 
            font-family: 'Gaegu', cursive; 
            font-size: 1.35rem; 
            line-height: 1.8; 
            color: #333;
            text-align: left;
            white-space: pre-wrap; 
        }

        .decor { position: absolute; opacity: 0.3; pointer-events: none; z-index: 1; }

        .slide-up #halaman-awal { transform: translateY(-100%); }
        .slide-up #halaman-utama { transform: translateY(-100%); }
    </style>
</head>
<body id="main-body">

    <audio id="lagu" src="lagu1.mp3" loop playsinline preload="auto"></audio>

    <div id="halaman-awal">
        <div id="decor-awal"></div>
        <h1 class="judul-awal">What I want to tell you ü´£ü´†‚ÅâÔ∏è</h1>
        
        <div class="envelope-wrapper" id="btn-buka">
            <div class="film-strip" id="film"><img src="fotogerak.jpg"></div>
            <div class="envelope" id="envelope-body">
                <div class="franco">BUKA</div>
            </div>
        </div>
        <p style="margin-top: 20px; color: #666; font-size: 0.9rem;">(Klik suratnya)</p>
    </div>

    <div id="halaman-utama">
        <div id="decor-utama"></div>
        <div class="photo-wrapper">
            <div class="frame foto1"><img src="foto1.jpg"></div>
            <div class="frame foto2"><img src="foto2.jpg"></div>
            <div class="frame foto3"><img src="foto3.jpg"></div>
            <div class="frame foto4"><img src="foto4.jpg"></div>
        </div>
        <div class="paper">
            <div id="typing-text"></div>
        </div>
    </div>

    <script>
        const btnBuka = document.getElementById('btn-buka');
        const envelope = document.getElementById('envelope-body');
        const film = document.getElementById('film');
        const lagu = document.getElementById('lagu');
        const textElement = document.getElementById('typing-text');
        
        const pesan = "Dari banyaknya orang-orang yang datang di kehidupanku, terimakasih karena kamu sudah menjadi yang terbaik di antara mereka.\n\nMakasih untuk hal-hal baik yang udah kamu usahain, makasih buat semua perlakuan baik kamu ke aku. \n\nAku mau kamu tau kalau aku bangga banget punya cowok kayak kamu.\n\nKamu tulus, sabar, dan selalu punya cara buat bikin aku ngerasa aman. Aku bersyukur banget bisa nemuin seseorang sebaik kamu dalam dunia yang kadang cuma tau gimana caranya pergi.\n\nDan kalau nanti kamu ketemu cewek yang lebih baik dari aku, aku harap kamu tetep milih aku sebagai pendamping hidup kamu.\n\nAku mau kamu tau kalau aku beneran secinta itu sama kamu.\n\nSo, thank you for being you, for loving me the way you do, and for choosing me in every version of myself.\n\nI love you, more than words could ever say. ü•∞üåπ‚ú®";

        function spawnDecor(containerId) {
            const container = document.getElementById(containerId);
            const emojis = ['‚òÅÔ∏è', '‚ú®', '‚≠ê', 'üéà'];
            for (let i = 0; i < 15; i++) {
                const d = document.createElement('div');
                d.className = 'decor';
                d.innerHTML = emojis[Math.floor(Math.random() * emojis.length)];
                d.style.left = Math.random() * 90 + '%';
                d.style.top = Math.random() * 90 + '%';
                container.appendChild(d);
            }
        }
        spawnDecor('decor-awal');
        spawnDecor('decor-utama');

        btnBuka.addEventListener('click', function() {
            // SOLUSI iPHONE: Memicu audio langsung pada saat interaksi user
            // Kita play lalu pause seketika untuk mendapatkan "kunci" audio dari sistem
            lagu.play().then(() => {
                lagu.pause(); 
                lagu.currentTime = 38; // Set ke reff
            }).catch(e => console.log("Audio trigger error:", e));

            envelope.classList.add('open');
            setTimeout(() => { 
                film.style.opacity = "1"; 
                film.classList.add('animate-out'); 
            }, 600);
            
            setTimeout(() => { 
                film.classList.remove('animate-out'); 
                void film.offsetWidth; 
                film.classList.add('animate-big'); 
            }, 2100);

            setTimeout(() => {
                // Mainkan kembali lagu saat transisi halaman dimulai
                lagu.play().catch(error => {
                    console.log("Playback failed:", error);
                });
                
                document.getElementById('main-body').classList.add('slide-up');
                setTimeout(mulaiKetik, 1000);
            }, 6500); 
        });

        function mulaiKetik() {
            let i = 0;
            textElement.textContent = ""; 
            function ketik() {
                if (i < pesan.length) {
                    textElement.textContent += pesan.charAt(i);
                    i++;
                    setTimeout(ketik, 45);
                    const paper = document.querySelector('.paper');
                    paper.scrollTop = paper.scrollHeight;
                }
            }
            ketik();
        }
    </script>
</body>
</html>

